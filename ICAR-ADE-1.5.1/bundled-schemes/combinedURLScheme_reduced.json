{
  "openapi": "3.1.0",
  "info": {
    "title": "Custom ICAR API Specifications",
    "description": "Specifications for some message types.",
    "version": "1.5",
    "contact": {
      "name": "Animal Data Exchange Working Group",
      "url": "https://www.icar.org/index.php/technical-bodies/working-groups/animal-data-exchange-wg/",
      "email": "icar@icar.org"
    }
  },
  "servers": [
    {
      "url": "https://icar-ade.standard.com"
    }
  ],
  "tags": [
    {
      "name": "ADE-1.5-milk",
      "description": "Milking-related messages approved by the working group"
    },
    {
      "name": "ADE-1.5-registration",
      "description": "Registration and movement messages approved by the working group"
    }
  ],
  "paths": {
    "/locations/{location-scheme}/{location-id}/milking-visits": {
      "get": {
        "operationId": "get-milking-visits",
        "summary": "Get the milking-visits for a certain location",
        "description": "# Purpose\nProvides the animal milking-visits for a location\n",
        "tags": [
          "ADE-1.5-milk"
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/location-scheme"
          },
          {
            "$ref": "#/components/parameters/location-id"
          },
          {
            "$ref": "#/components/parameters/meta-modified-from"
          },
          {
            "$ref": "#/components/parameters/meta-modified-to"
          },
          {
            "$ref": "#/components/parameters/animal-scheme"
          },
          {
            "$ref": "#/components/parameters/animal-id"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful. The response contains the diagnoses for the given location.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/icarMilkingVisitEventCollection"
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/default"
          }
        }
      }
    },
    "/locations/{location-scheme}/{location-id}/animals": {
      "get": {
        "operationId": "get-animals",
        "summary": "Get the animals for a certain location",
        "description": "# Purpose\nProvides the animals on a location\n",
        "tags": [
          "ADE-1.5-registration"
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/location-scheme"
          },
          {
            "$ref": "#/components/parameters/location-id"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful. The response contains the animals for the given location",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/icarAnimalCoreCollection"
                }
              }
            }
          },
          "default": {
            "$ref": "#/components/responses/default"
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "icarBatchResultSeverityType": {
        "description": "Severity code to distinguish warnings and errors.",
        "type": "string",
        "enum": [
          "Information",
          "Warning",
          "Error"
        ]
      },
      "icarResponseMessageResource": {
        "description": "An RFC7807 compliant problem response for JSON APIs.",
        "type": "object",
        "properties": {
          "type": {
            "type": "string",
            "description": "Machine readable URI or code that defines the type of error or warning."
          },
          "severity": {
            "$ref": "#/components/schemas/icarBatchResultSeverityType",
            "description": "Distinguish errors, warnings, and informational messages."
          },
          "status": {
            "type": [
              "integer",
              "null"
            ],
            "description": "The HTTP status code applicable to this problem.",
            "format": "int32"
          },
          "title": {
            "type": "string",
            "description": "A short, human-readable summary of the problem that SHOULD NOT change from occurrence to occurrence of the problem, except for purposes of localization."
          },
          "detail": {
            "type": "string",
            "description": "A human-readable explanation specific to this occurrence of the problem. Like title, this fieldâ€™s value can be localized."
          },
          "instance": {
            "type": [
              "string",
              "null"
            ],
            "description": "A URI reference or internal JSON document reference to the specific data item that caused the problem."
          }
        }
      },
      "icarErrorCollection": {
        "description": "A collection of RFC7807 compliant problem responses for JSON APIs.",
        "type": "object",
        "properties": {
          "errors": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/icarResponseMessageResource"
            }
          }
        }
      },
      "icarResourceCollection": {
        "description": "Base class for a collection of items such as animals, devices, or events. Use allOf to add an items array of the right type.",
        "type": "object",
        "properties": {
          "view": {
            "type": "object",
            "description": "Information about the current view or page of the collection",
            "properties": {
              "totalItems": {
                "type": "integer",
                "description": "Provides the number of items in the collection, if known."
              },
              "totalPages": {
                "type": "integer",
                "description": "Provides the number of pages in the collection, if known."
              },
              "pageSize": {
                "type": "integer",
                "description": "If non-zero, specifies the default number of items returned per page."
              },
              "currentPage": {
                "type": "integer",
                "description": "Optionally identifies the current page for display purposes, if returned."
              },
              "first": {
                "type": "string",
                "format": "uri",
                "description": "Link to the first page of the collection. Link relation: first."
              },
              "next": {
                "type": "string",
                "format": "uri",
                "description": "Link to the next page of the collection, if any. Link relation: next."
              },
              "prev": {
                "type": "string",
                "format": "uri",
                "description": "Link to the previous page of the collection, if any. Link relation: prev."
              },
              "last": {
                "type": "string",
                "format": "uri",
                "description": "Link to the last page of the collection, if any. Link relation: last."
              }
            }
          }
        }
      },
      "icarDateTimeType": {
        "description": "A particular point in the progression of time. Shall be UTC format with Z, specified in RFC3339 (see https://ijmacd.github.io/rfc3339-iso8601/ for format guidance).",
        "type": "string",
        "format": "date-time"
      },
      "icarMetaDataType": {
        "description": "Generic meta data on this event",
        "type": "object",
        "required": [
          "source",
          "modified"
        ],
        "properties": {
          "source": {
            "type": "string",
            "description": "Source where data is retrieved from. URI  or reverse DNS that identifies the source system."
          },
          "sourceId": {
            "type": "string",
            "description": "Unique Id within Source (e.g. UUID, IRI, URI, or composite ID if needed) for the resource in the original source system. \n Systems should generate (if needed), store, and return sourceId if at all possible.\nICAR ADE working group intend to make use of metadata, source and sourceId mandatory in the next major release (2.0)."
          },
          "isDeleted": {
            "type": "boolean",
            "description": "Boolean value indicating if this resource has been deleted in the source system."
          },
          "modified": {
            "$ref": "#/components/schemas/icarDateTimeType",
            "description": "RFC3339 UTC date/time of last modification (see https://ijmacd.github.io/rfc3339-iso8601/ for format guidance)."
          },
          "created": {
            "description": "RFC3339 UTC date/time of creation (see https://ijmacd.github.io/rfc3339-iso8601/ for format guidance).",
            "anyOf": [
              {
                "type": "null"
              },
              {
                "$ref": "#/components/schemas/icarDateTimeType"
              }
            ]
          },
          "creator": {
            "type": "string",
            "description": "Person or organisation who created the object"
          },
          "validFrom": {
            "description": "RFC3339 UTC start of period when the resource is valid (see https://ijmacd.github.io/rfc3339-iso8601/ for format guidance).",
            "anyOf": [
              {
                "type": "null"
              },
              {
                "$ref": "#/components/schemas/icarDateTimeType"
              }
            ]
          },
          "validTo": {
            "description": "RFC3339 UTC end of the period when the resoure is valid (see https://ijmacd.github.io/rfc3339-iso8601/ for format guidance).",
            "anyOf": [
              {
                "type": "null"
              },
              {
                "$ref": "#/components/schemas/icarDateTimeType"
              }
            ]
          }
        }
      },
      "icarIdentifierType": {
        "description": "Identifies a resource.",
        "type": "object",
        "required": [
          "id",
          "scheme"
        ],
        "properties": {
          "id": {
            "type": "string",
            "description": "A unique identification for the resource issued under the auspices of the scheme."
          },
          "scheme": {
            "type": "string",
            "description": "The identifier (in reverse domain format) of an official scheme that manages unique identifiers."
          }
        }
      },
      "icarLocationIdentifierType": {
        "description": "Location identifier based on a scheme and ID.",
        "allOf": [
          {
            "$ref": "#/components/schemas/icarIdentifierType"
          }
        ]
      },
      "icarResource": {
        "description": "Base class for a resource, defining self-link and meta data. Resources should use AllOf to incorporate this class.",
        "type": "object",
        "discriminator": {
          "propertyName": "resourceType"
        },
        "required": [
          "resourceType"
        ],
        "properties": {
          "resourceType": {
            "type": "string",
            "description": "Uniform resource identifier (URI) or shortname of the logical resourceType. The ResourceType catalog defines the set of allowed resourceTypes."
          },
          "@self": {
            "type": "string",
            "description": "Uniform resource identifier (URI) of the resource (rel=self)."
          },
          "meta": {
            "$ref": "#/components/schemas/icarMetaDataType",
            "description": "Meta-data for the resource. Mandatory if you wish to support synchronisation.\n Systems should maintain and provide meta data if at all possible.\nICAR ADE working group intend meta to be required in the next major release of ADE."
          },
          "location": {
            "$ref": "#/components/schemas/icarLocationIdentifierType",
            "description": "Unique location scheme and identifier combination."
          }
        }
      },
      "icarPropertyIdentifierType": {
        "description": "Provides a scheme + identifier mechanism for feed properties (see location-scheme.md for the icar list for scheme icar.org).",
        "allOf": [
          {
            "$ref": "#/components/schemas/icarIdentifierType"
          }
        ]
      },
      "uncefactMassUnitsType": {
        "description": "Mass units for weight from UN/CEFACT trade facilitation recommendation 20.\r\n Kilogram, Gram, Pound, Metric Tonne, Microgram, Miligram, Ounce, Pound net.",
        "type": "string",
        "enum": [
          "KGM",
          "GRM",
          "LBR",
          "TNE",
          "MC",
          "MGM",
          "ONZ",
          "PN"
        ]
      },
      "icarTraitLabelIdentifierType": {
        "description": "Trait identifier based on a scheme and ID.",
        "allOf": [
          {
            "$ref": "#/components/schemas/icarIdentifierType"
          }
        ]
      },
      "icarEventCoreResource": {
        "description": "Core schema for representing an event.",
        "allOf": [
          {
            "$ref": "#/components/schemas/icarResource"
          },
          {
            "type": "object",
            "properties": {
              "id": {
                "type": "string",
                "description": "Unique identifier in the source system for this event."
              },
              "eventDateTime": {
                "$ref": "#/components/schemas/icarDateTimeType",
                "description": "RFC3339 UTC date and time (see https://ijmacd.github.io/rfc3339-iso8601/)."
              },
              "traitLabel": {
                "$ref": "#/components/schemas/icarTraitLabelIdentifierType",
                "description": "If the event represents a formal trait, identifies the recording system and trait."
              },
              "responsible": {
                "type": "string",
                "description": "Use if an observation is manually recorded, or an event is carried out or authorised by a person. SHOULD be a person object."
              },
              "contemporaryGroup": {
                "type": "string",
                "description": "For manually recorded events, record any contemporary group code that would affect statistical analysis."
              },
              "remark": {
                "type": "string",
                "description": "A comment or remark field for additional user-specified information about the event."
              }
            }
          }
        ]
      },
      "icarAnimalIdentifierType": {
        "description": "Identifies an animal using a scheme and ID.",
        "allOf": [
          {
            "$ref": "#/components/schemas/icarIdentifierType"
          }
        ]
      },
      "icarAnimalEventCoreResource": {
        "description": "Extends icarEventCoreResource to add a single individual animal identifier.",
        "allOf": [
          {
            "$ref": "#/components/schemas/icarEventCoreResource"
          },
          {
            "type": "object",
            "required": [
              "animal"
            ],
            "properties": {
              "animal": {
                "$ref": "#/components/schemas/icarAnimalIdentifierType",
                "description": "Unique animal scheme and identifier combination."
              }
            }
          }
        ]
      },
      "icarResourceReferenceType": {
        "description": "Defines a reference to another resource.",
        "type": "object",
        "properties": {
          "@context": {
            "type": "string",
            "description": "Deprecated. Tells us the type of the referenced resource object (eg. icarAnimalCore)."
          },
          "@id": {
            "type": "string",
            "format": "uri",
            "description": "Deprecated - use href and identifier. Uniform resource idendentifier (URI) of the referenced resource."
          },
          "@type": {
            "type": "string",
            "description": "Deprecated - use reltype. Specifies whether this is a single resource Link or a Collection."
          },
          "identifier": {
            "$ref": "#/components/schemas/icarIdentifierType",
            "description": "Provides the identifier of the referenced resource."
          },
          "reltype": {
            "type": "string",
            "description": "Defines the relationship between the current resource and the referenced resource. Defined in well-known/relationshipCatalog.md"
          },
          "href": {
            "type": "string",
            "format": "uri",
            "description": "Where provided, this is the URI to the referenced resource."
          }
        }
      },
      "icarAnimalSpecieType": {
        "description": "Enumeration for species of animal using English names. Previous ADE definitions used a mixture of English and Genus names.",
        "type": "string",
        "enum": [
          "Buffalo",
          "Cattle",
          "Deer",
          "Elk",
          "Goat",
          "Horse",
          "Pig",
          "Sheep"
        ]
      },
      "icarAnimalGenderType": {
        "description": "Enumeration for sex of animal using species-independent English names. Includes neuter/cryptorchid variations.",
        "type": "string",
        "enum": [
          "Female",
          "FemaleNeuter",
          "Freemartin",
          "Male",
          "MaleCryptorchid",
          "MaleNeuter",
          "Unknown"
        ]
      },
      "icarBreedIdentifierType": {
        "description": "Identifies a breed using a scheme and ID. Allows country or species-specific breeds that are a superset of the ICAR list.",
        "allOf": [
          {
            "$ref": "#/components/schemas/icarIdentifierType"
          }
        ]
      },
      "icarAnimalReproductionStatusType": {
        "description": "Enumeration for different possible reproduction status of an animal.",
        "type": "string",
        "enum": [
          "Open",
          "Inseminated",
          "Pregnant",
          "NotPregnant",
          "Birthed",
          "DoNotBreed",
          "PregnantMultipleFoetus"
        ]
      },
      "icarAnimalLactationStatusType": {
        "description": "Enumeration for different possible lactation status of an animal.",
        "type": "string",
        "enum": [
          "Dry",
          "Lead",
          "Fresh",
          "Early",
          "Lactating"
        ]
      },
      "icarProductionPurposeType": {
        "description": "Defines the primary product that for which this animal is bred or kept.\\nIf animals are kept for breeding or live trade (sale), specify the end purpose of that breeding/trade.\\n\n - Meat corresponds to UNSPC 50111500 Minimally processed meat and poultry products\\n - Milk corresponds to UNSPC 50203200 Raw milk products from live animals\\n - Wool corresponds to UNSPC 11131506 Unprocessed wool.\\n Suckler - used to breastfeed calves.\\n Breeding - bulls used for semen production.\\n",
        "type": "string",
        "enum": [
          "Meat",
          "Milk",
          "Wool",
          "Suckler",
          "Breeding",
          "Research",
          "Pet"
        ]
      },
      "icarBatchResult": {
        "description": "Returned by a batch POST event to return identity (meta), errors, and warnings for a resource.",
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Unique identifier created in the system for this event. SHOULD be a UUID."
          },
          "meta": {
            "$ref": "#/components/schemas/icarMetaDataType",
            "description": "Metadata for the posted resource. Allows specification of the source, source Id to synchronise data."
          },
          "messages": {
            "type": [
              "array",
              "null"
            ],
            "description": "An array of errors for this resource. The messages array may be unspecified OR null.",
            "items": {
              "$ref": "#/components/schemas/icarResponseMessageResource"
            }
          }
        }
      },
      "icarAnimalHealthStatusType": {
        "description": "Defines the health-status of the animal.",
        "type": "string",
        "enum": [
          "Healthy",
          "Suspicious",
          "Ill",
          "InTreatment",
          "ToBeCulled"
        ]
      },
      "icarDateType": {
        "description": "A particular day.",
        "type": "string",
        "format": "date"
      },
      "icarMetricType": {
        "description": "Identifies a metric using a scheme and ID. Allows country or species-specific metrics that are a superset of the ICAR list.",
        "allOf": [
          {
            "$ref": "#/components/schemas/icarIdentifierType"
          }
        ]
      },
      "icarMilkingVisitEventResource": {
        "description": "Event for recording milking visit",
        "allOf": [
          {
            "$ref": "#/components/schemas/icarAnimalEventCoreResource"
          },
          {
            "type": "object",
            "required": [
              "milkingStartingDateTime",
              "milkingMilkWeight"
            ],
            "properties": {
              "milkingStartingDateTime": {
                "$ref": "#/components/schemas/icarDateTimeType",
                "description": "The RFC3339 UTC date time of the start of milking (see https://ijmacd.github.io/rfc3339-iso8601/ for format guidance)."
              },
              "milkingDuration": {
                "$ref": "#/components/schemas/icarMilkDurationType"
              },
              "milkingVisitDuration": {
                "$ref": "#/components/schemas/icarMilkDurationType"
              },
              "milkingType": {
                "description": "This code allows organisations to distinguish between manual and automated milking.",
                "$ref": "#/components/schemas/icarMilkingTypeCode"
              },
              "milkingMilkWeight": {
                "description": "A certified milking weight that complies with the ICAR guidelines.",
                "$ref": "#/components/schemas/icarMilkingMilkWeightType"
              },
              "milkingComplete": {
                "type": "boolean",
                "description": "indication whether this milking was completed normally."
              },
              "milkingParlourUnit": {
                "type": "string",
                "description": "The milking parlour unit where the milking took place."
              },
              "milkingBoxNumber": {
                "type": "string",
                "description": "The milking box number where the milking took place."
              },
              "milkingDeviceId": {
                "type": "string",
                "description": "The ID of the device where the milking took place."
              },
              "measureDeviceId": {
                "type": "string",
                "description": "The ID of the device where the measurement of the milking took place"
              },
              "milkingShiftLocalStartDate": {
                "$ref": "#/components/schemas/icarDateTimeType",
                "description": "The ISO8601 date in local time zone to which this milking shift belongs. A time component is not expected or required."
              },
              "milkingShiftNumber": {
                "type": "integer",
                "description": "For milkings supervised by humans, this number represents the shift within a local date in which this milking visit occurred."
              },
              "quarterMilkings": {
                "description": "A set of milking results for up to four quarters in dairy cows, or two teats for sheep or goats.",
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/icarQuarterMilkingType"
                }
              },
              "animalMilkingSample": {
                "description": "An array of zero or more sample/bottle details if the animal is milk tested at this milking.",
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/icarAnimalMilkingSampleType"
                }
              },
              "milkCharacteristics": {
                "description": "An array of milk characteristics other than certified milk weight. See icarMilkCharacteristicsType for documentation.",
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/icarMilkCharacteristicsType"
                }
              },
              "milkingRemarks": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/icarMilkingRemarksType"
                }
              }
            }
          }
        ]
      },
      "icarMilkingVisitEventCollection": {
        "description": "Represents a collection of animal milking visit events. Based on icarResourceCollection to provide paging etc.",
        "allOf": [
          {
            "$ref": "#/components/schemas/icarResourceCollection"
          },
          {
            "type": "object",
            "properties": {
              "member": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/icarMilkingVisitEventResource"
                },
                "description": "As per JSON-LD Hydra syntax, member provides the array of objects, in this case milking visit events."
              }
            }
          }
        ]
      },
      "icarMilkingVisitEventArray": {
        "type": "array",
        "items": {
          "$ref": "#/components/schemas/icarMilkingVisitEventResource"
        }
      },
      "icarMilkDurationType": {
        "description": "The length in time of the milking",
        "type": "object",
        "properties": {
          "unitCode": {
            "type": "string",
            "description": "UN/CEFACT Common Code for Units of Measurement.",
            "enum": [
              "SEC",
              "MIN"
            ]
          },
          "value": {
            "type": "number",
            "format": "double"
          }
        }
      },
      "icarMilkingTypeCode": {
        "description": "The type of milking (manual or automated)",
        "type": "string",
        "enum": [
          "Manual",
          "Automated"
        ]
      },
      "icarMilkingMilkWeightType": {
        "description": "The amount of milk milked",
        "type": "object",
        "required": [
          "unitCode",
          "value"
        ],
        "properties": {
          "unitCode": {
            "type": "string",
            "description": "UN/CEFACT Common Code for Units of Measurement.",
            "enum": [
              "KGM"
            ]
          },
          "value": {
            "type": "number",
            "format": "double"
          }
        }
      },
      "icarBottleIdentifierType": {
        "description": "The type of bottle identifiertype according to ICAR_BottleIdentifierCode",
        "type": "string",
        "enum": [
          "BRC",
          "RFD"
        ]
      },
      "icarValidSampleFillingIndicatorType": {
        "description": "Validity of sample based on milk volume: 0=success (>80% expected milk), 1=incomplete (< 20% expected milk), 2=completed (with between 20-80% expected milk).",
        "type": "string",
        "enum": [
          "0",
          "1",
          "2"
        ]
      },
      "icarQuarterMilkingSampleType": {
        "description": "",
        "type": "object",
        "properties": {
          "bottleIdentifierType": {
            "$ref": "#/components/schemas/icarBottleIdentifierType",
            "description": "The type of bottle identifiertype according to ICAR_BottleIdentifierCode"
          },
          "rackNumber": {
            "type": "string",
            "description": "Number of the sample rack"
          },
          "bottlePosition": {
            "type": "string",
            "description": "Position of the bottle in the sample rack"
          },
          "bottleIdentifier": {
            "type": "string",
            "description": "Bottle identifier read from barcode or RFID"
          },
          "validSampleFillingIndicator": {
            "$ref": "#/components/schemas/icarValidSampleFillingIndicatorType",
            "description": "Indicator of valid sample filling according to ICAR_ValidSampleFillingIndicatorCode list"
          },
          "operator": {
            "type": "string",
            "description": "The operator that took the sample"
          }
        }
      },
      "icarMilkCharacteristicsType": {
        "description": "Characteristics of the milk produced.",
        "type": "object",
        "required": [
          "characteristic",
          "value"
        ],
        "properties": {
          "characteristic": {
            "type": "string",
            "description": "Treat this field as an enum, with the list and units in https://github.com/adewg/ICAR/blob/ADE-1/enums/icarMilkCharacteristicCodeType.json."
          },
          "value": {
            "type": "string",
            "description": "the value of the characteristic measured"
          },
          "unit": {
            "type": "string",
            "description": "Use the units for characteristics in https://github.com/adewg/ICAR/blob/ADE-1/enums/icarMilkCharacteristicCodeType.json. Only override when your units for a characteristic are different. Use UN/CEFACT codes."
          },
          "measuringDevice": {
            "type": "string",
            "description": "a more readable device class ID that contains manufacturer, device, hardware and software versions in a way that is similar to the USB specification. This will need more investigation."
          }
        }
      },
      "icarQuarterMilkingType": {
        "description": "",
        "type": "object",
        "properties": {
          "icarQuarterId": {
            "type": "string",
            "description": "the unique id of the quarter milking",
            "enum": [
              "LF",
              "RF",
              "LR",
              "RR"
            ]
          },
          "xposition": {
            "type": [
              "number",
              "null"
            ],
            "description": "Optional milking robot X position. Vendors may choose not to provide this."
          },
          "yposition": {
            "type": [
              "number",
              "null"
            ],
            "description": "Optional milking robot Y position. Vendors may choose not to provide this."
          },
          "zposition": {
            "type": [
              "number",
              "null"
            ],
            "description": "Optional milking robot Z position. Vendors may choose not to provide this."
          },
          "quarterMilkingDuration": {
            "$ref": "#/components/schemas/icarMilkDurationType"
          },
          "quarterMilkingWeight": {
            "$ref": "#/components/schemas/icarMilkingMilkWeightType"
          },
          "icarQuarterMilkingSample": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/icarQuarterMilkingSampleType"
            }
          },
          "icarQuarterCharacteristics": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/icarMilkCharacteristicsType"
            }
          }
        }
      },
      "icarAnimalMilkingSampleType": {
        "description": "",
        "type": "object",
        "properties": {
          "bottleIdentifierType": {
            "$ref": "#/components/schemas/icarBottleIdentifierType",
            "description": "The type of bottle identifiertype according to ICAR_BottleIdentifierCode"
          },
          "rackNumber": {
            "type": "string",
            "description": "Number of the sample rack"
          },
          "bottlePosition": {
            "type": "string",
            "description": "Position of the bottle in the sample rack"
          },
          "bottleIdentifier": {
            "type": "string",
            "description": "Bottle identifier read from barcode or RFID"
          },
          "validSampleFillingIndicator": {
            "$ref": "#/components/schemas/icarValidSampleFillingIndicatorType",
            "description": "Indicator of valid sample filling according to ICAR_ValidSampleFillingIndicatorCode list"
          },
          "operator": {
            "type": "string",
            "description": "The operator that took the sample"
          }
        }
      },
      "icarMilkingRemarksType": {
        "description": "Enumeration for different possible milking-remarks.",
        "type": "string",
        "enum": [
          "AnimalSick",
          "MilkingIncomplete",
          "TeatSeparated",
          "MilkedSeparately",
          "SamplingFailed"
        ]
      },
      "icarTraitAmountType": {
        "description": "",
        "type": "object",
        "required": [
          "unitCode",
          "value"
        ],
        "properties": {
          "unitCode": {
            "type": "string",
            "description": "UN/CEFACT Common Code for Units of Measurement.",
            "enum": [
              "KGM",
              "LBR"
            ]
          },
          "value": {
            "type": "number",
            "format": "double"
          }
        }
      },
      "icarMilkSamplingSchemeType": {
        "description": "Enumeration for the different milk sampling schemes.",
        "type": "string",
        "enum": [
          "ProportionalSizeSamplingOfAllMilkings",
          "ConstantSizeSamplingOfAllMilkings",
          "AlternateSampling",
          "CorrectedSampling",
          "OneMilkingSampleInAMS",
          "MulitpleMilkingSampleInAMS"
        ]
      },
      "icarMilkSamplingMomentType": {
        "description": "Enumeration for different possible milk sampling moments.",
        "type": "string",
        "enum": [
          "Composite",
          "Morning",
          "Evening"
        ]
      },
      "icarMilkingType": {
        "description": "Enumeration for different possible types of milking.",
        "type": "string",
        "enum": [
          "OfficialMilkResultSuppliedByMRO",
          "MeasureByICARApprovedEquipment",
          "MeasureByNotApprovedEquipment"
        ]
      },
      "icarAnimalCoreCollection": {
        "description": "Represents a collection of animals. Based on icarResourceCollection to provide paging etc.",
        "allOf": [
          {
            "$ref": "#/components/schemas/icarResourceCollection"
          },
          {
            "type": "object",
            "properties": {
              "member": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/icarAnimalCoreResource"
                },
                "description": "As per JSON-LD Hydra syntax, member provides the array of objects, in this case animals."
              }
            }
          }
        ]
      },
      "icarAnimalCoreResource": {
        "description": "Core schema for representing animal",
        "allOf": [
          {
            "$ref": "#/components/schemas/icarAnimalBaseResource"
          },
          {
            "type": "object",
            "required": [
              "identifier"
            ],
            "properties": {
              "identifier": {
                "$ref": "#/components/schemas/icarAnimalIdentifierType",
                "description": "Unique animal scheme and identifier combination."
              },
              "status": {
                "$ref": "#/components/schemas/icarAnimalStatusType",
                "description": "On-farm status of the animal (such as alive, dead, off-farm)."
              },
              "lactationStatus": {
                "$ref": "#/components/schemas/icarAnimalLactationStatusType",
                "description": "Lactation status of the animal."
              },
              "reproductionStatus": {
                "$ref": "#/components/schemas/icarAnimalReproductionStatusType",
                "description": "Reproduction status of the animal."
              }
            }
          }
        ]
      },
      "icarAnimalCoreResourceArray": {
        "type": "array",
        "items": {
          "$ref": "#/components/schemas/icarAnimalCoreResource"
        }
      },
      "icarLocationResource": {
        "description": "A location scheme / location id combination.",
        "allOf": [
          {
            "$ref": "#/components/schemas/icarResource"
          },
          {
            "type": "object",
            "required": [
              "identifier"
            ],
            "properties": {
              "identifier": {
                "$ref": "#/components/schemas/icarLocationIdentifierType",
                "description": "Unique location scheme and identifier combination."
              },
              "alternativeIdentifiers": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/icarLocationIdentifierType"
                },
                "description": "Alternative identifiers for the location. Must be a 1:1 mapping, meaning that when querying resources with an alternative identifier (instead of the 'main' identifier), the response may not be different."
              },
              "name": {
                "type": "string",
                "description": "The human readable name of the location."
              },
              "timeZoneId": {
                "type": "string",
                "description": "The time zone ID of the location according to the IANA time zone database (https://www.iana.org/time-zones), e.g. Europe/Paris. Can be used to convert UTC times in events, resources etc. back to the locations time zone while also taking daylight saving times into account."
              }
            }
          }
        ]
      },
      "icarBreedFractionsType": {
        "description": "Defines the breeds of the animal by fraction expressed as a denominator and, for each breed, a numerator.",
        "type": "object",
        "required": [
          "denominator"
        ],
        "properties": {
          "denominator": {
            "type": "integer",
            "description": "The denominator of breed fractions - for instance 16, 64, or 100."
          },
          "fractions": {
            "type": "array",
            "description": "The numerators of breed fractions for each breed proportion.",
            "items": {
              "type": "object",
              "properties": {
                "breed": {
                  "$ref": "#/components/schemas/icarBreedIdentifierType",
                  "description": "The breed for this breed fraction using a scheme and id."
                },
                "fraction": {
                  "type": "number",
                  "format": "double",
                  "description": "The proportion of the denominator that this breed comprises."
                }
              }
            }
          }
        }
      },
      "icarCoatColorIdentifierType": {
        "description": "Coat color identifier based on a scheme and Id.",
        "allOf": [
          {
            "$ref": "#/components/schemas/icarIdentifierType"
          }
        ]
      },
      "icarAnimalRelationType": {
        "description": "Enumeration for parent relationships - genetic is the default, recipient and adoptive (foster) are alternatives.",
        "type": "string",
        "enum": [
          "Genetic",
          "Recipient",
          "Adoptive"
        ]
      },
      "icarParentageType": {
        "description": "Use this type to define a parent of an animal.",
        "type": "object",
        "required": [
          "parentOf",
          "gender",
          "identifier"
        ],
        "properties": {
          "parentOf": {
            "$ref": "#/components/schemas/icarAnimalIdentifierType",
            "description": "References the child of this parent (allowing you to build multi-generation pedigrees)."
          },
          "gender": {
            "$ref": "#/components/schemas/icarAnimalGenderType",
            "description": "Specifies Male or Female gender so you can recognise Sire or Dam."
          },
          "relation": {
            "$ref": "#/components/schemas/icarAnimalRelationType",
            "description": "Identifies type of parent: Genetic (default), Recipient, Adoptive (Foster/Rearing)."
          },
          "identifier": {
            "$ref": "#/components/schemas/icarAnimalIdentifierType",
            "description": "Unique animal scheme and identifier combination."
          },
          "officialName": {
            "type": "string",
            "description": "Official herdbook name."
          }
        }
      },
      "icarAnimalBaseResource": {
        "description": "Base schema containing all common properties for animal and progeny resources.",
        "allOf": [
          {
            "$ref": "#/components/schemas/icarResource"
          },
          {
            "type": "object",
            "required": [
              "specie",
              "gender"
            ],
            "properties": {
              "alternativeIdentifiers": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/icarAnimalIdentifierType"
                },
                "description": "Alternative identifiers for the animal. Here, also temporary identifiers, e.g. transponders or animal numbers, can be listed."
              },
              "specie": {
                "$ref": "#/components/schemas/icarAnimalSpecieType",
                "description": "Species of the animal."
              },
              "gender": {
                "$ref": "#/components/schemas/icarAnimalGenderType",
                "description": "Gender of the animal."
              },
              "birthDate": {
                "$ref": "#/components/schemas/icarDateTimeType",
                "description": "RFC3339 UTC date/time of birth (see https://ijmacd.github.io/rfc3339-iso8601/ for how to use)."
              },
              "primaryBreed": {
                "$ref": "#/components/schemas/icarBreedIdentifierType",
                "description": "ICAR Breed code for the animal."
              },
              "breedFractions": {
                "$ref": "#/components/schemas/icarBreedFractionsType",
                "description": "Breed fractions for the animal."
              },
              "coatColor": {
                "type": "string",
                "description": "Colour of the animal's coat, using the conventions for that breed."
              },
              "coatColorIdentifier": {
                "$ref": "#/components/schemas/icarCoatColorIdentifierType",
                "description": "Colour of the animal's coat using a national or breed-defined scheme and identifier combination."
              },
              "managementTag": {
                "type": "string",
                "description": "The identifier used by the farmer in day to day operations. In many cases this could be the animal number."
              },
              "name": {
                "type": "string",
                "description": "Name given by the farmer for this animal."
              },
              "officialName": {
                "type": "string",
                "description": "Official herdbook name."
              },
              "productionPurpose": {
                "$ref": "#/components/schemas/icarProductionPurposeType",
                "description": "Primary production purpose for which animals are bred."
              },
              "parentage": {
                "type": "array",
                "description": "Parents of the animal.  The array can handle multiple generations by specifying the parent of a parent.",
                "items": {
                  "$ref": "#/components/schemas/icarParentageType"
                }
              },
              "healthStatus": {
                "$ref": "#/components/schemas/icarAnimalHealthStatusType",
                "description": "Health status of the animal (such as Healthy, Suspicious, Ill, InTreatment, ToBeCulled)."
              }
            }
          }
        ]
      },
      "icarAnimalStatusType": {
        "description": "Defines the status of the animal either absolutely and/or with reference to the location on which it is recorded\\nOff-farm signifies that the animal is no longer recorded at the location.",
        "type": "string",
        "enum": [
          "Alive",
          "Dead",
          "OffFarm",
          "Unknown"
        ]
      }
    },
    "responses": {
      "default": {
        "description": "An error has occured while handling the request. Check the content of the message for the error details.",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/icarErrorCollection"
            }
          }
        }
      }
    },
    "parameters": {
      "location-scheme": {
        "name": "location-scheme",
        "in": "path",
        "description": "The scheme id for the location identifier.",
        "required": true,
        "schema": {
          "type": "string"
        }
      },
      "location-id": {
        "name": "location-id",
        "in": "path",
        "description": "The unique identifier for the location.",
        "required": true,
        "schema": {
          "type": "string"
        }
      },
      "meta-modified-from": {
        "name": "meta-modified-from",
        "in": "query",
        "description": "The start of the date-time range for the data to get in the request.",
        "schema": {
          "type": "string",
          "format": "date-time"
        }
      },
      "meta-modified-to": {
        "name": "meta-modified-to",
        "in": "query",
        "description": "The end of the date-time range for the data to get in the request.",
        "schema": {
          "type": "string",
          "format": "date-time"
        }
      },
      "report-start-date-time": {
        "name": "report-start-date-time",
        "in": "query",
        "description": "The start of the date-time range for the data to get in the request based on the event date time.",
        "schema": {
          "type": "string",
          "format": "date-time"
        }
      },
      "report-end-date-time": {
        "name": "report-end-date-time",
        "in": "query",
        "description": "The end of the date-time range for the data to get in the request based on the event date time.",
        "schema": {
          "type": "string",
          "format": "date-time"
        }
      },
      "date-from": {
        "name": "date-to",
        "in": "query",
        "description": "The end of the date range for the period for which data is needed, the date inclusive.",
        "schema": {
          "type": "string",
          "format": "date"
        }
      },
      "date-to": {
        "name": "date-from",
        "in": "query",
        "description": "The start of the date range for the period for which data is needed, the date inclusive.",
        "schema": {
          "type": "string",
          "format": "date"
        }
      },
      "identifier-scheme": {
        "name": "identifier-scheme",
        "in": "query",
        "description": "The scheme for an identifier.",
        "required": false,
        "schema": {
          "type": "string"
        }
      },
      "identifier-id": {
        "name": "identifier-id",
        "in": "query",
        "description": "The unique identifier within a scheme.",
        "required": false,
        "schema": {
          "type": "string"
        }
      },
      "animal-scheme": {
        "name": "animal-scheme",
        "in": "query",
        "description": "The scheme identifying the animal.",
        "required": false,
        "schema": {
          "type": "string"
        }
      },
      "animal-id": {
        "name": "animal-id",
        "in": "query",
        "description": "The unique identifier of the animal.",
        "required": false,
        "schema": {
          "type": "string"
        }
      },
      "animal-scheme1": {
        "name": "animal-scheme",
        "in": "query",
        "description": "The scheme id for the animal identifier.",
        "required": false,
        "schema": {
          "type": "string"
        }
      },
      "animal-id1": {
        "name": "animal-id",
        "in": "query",
        "description": "The unique identifier for the animal.",
        "required": false,
        "schema": {
          "type": "string"
        }
      },
      "metric-scheme": {
        "name": "metric-scheme",
        "in": "query",
        "description": "The scheme for a metric.",
        "required": false,
        "schema": {
          "type": "string"
        }
      },
      "metric-id": {
        "name": "metric-id",
        "in": "query",
        "description": "The unique metric within a scheme.",
        "required": false,
        "schema": {
          "type": "string"
        }
      },
      "duration": {
        "name": "duration",
        "in": "query",
        "description": "The duration for aggregations (e.g. 1D, 1H, 24H, 96H).",
        "required": true,
        "schema": {
          "type": "string"
        }
      },
      "animal-scheme2": {
        "name": "animal-scheme",
        "in": "path",
        "description": "The scheme id for the animal identifier.",
        "required": true,
        "schema": {
          "type": "string"
        }
      },
      "animal-id2": {
        "name": "animal-id",
        "in": "path",
        "description": "The unique identifier for the animal.",
        "required": true,
        "schema": {
          "type": "string"
        }
      }
    },
    "examples": {
      "feed-storages": {
        "value": {
          "view": {
            "totalItems": 1,
            "totalPages": 1,
            "pageSize": 10,
            "currentPage": 1
          },
          "member": [
            {
              "id": "276031231231234",
              "name": "My first silo",
              "feedId": "a8f5944e-de92-4768-a1ff-392e15a2195e",
              "capacity": {
                "value": 50000,
                "unitCode": "KGM"
              },
              "quantityAvailable": {
                "value": 28765,
                "unitCode": "KGM"
              },
              "meta": {
                "source": "source",
                "creator": "creator",
                "modified": "2020-01-29T08:49:06.1314223+00:00",
                "created": "2020-01-29T08:49:06.1314223+00:00"
              }
            }
          ]
        }
      },
      "locations": {
        "value": {
          "view": {
            "totalItems": 1,
            "totalPages": 1,
            "pageSize": 10,
            "currentPage": 1
          },
          "member": [
            {
              "identifier": {
                "id": "276031231231234",
                "scheme": "eu.farmId"
              },
              "name": "My little farm",
              "timeZoneId": "Europe/Paris",
              "meta": {
                "source": "source",
                "creator": "creator",
                "modified": "2020-01-29T08:49:06.1314223+00:00",
                "created": "2020-01-29T08:49:06.1314223+00:00"
              }
            }
          ]
        }
      }
    }
  }
}